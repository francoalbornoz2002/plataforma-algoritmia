<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      color: #333;
      line-height: 1.4;
      font-size: 12px;
    }
    .header {
      text-align: center;
      margin-bottom: 30px;
      border-bottom: 2px solid #1976d2;
      padding-bottom: 10px;
    }
    .header h1 {
      color: #1976d2;
      margin: 0 0 5px 0;
      font-size: 24px;
    }
    .header p {
      color: #666;
      margin: 2px 0;
    }
    
    .kpi-container {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
      gap: 10px;
    }
    .kpi-card {
      background: #f5f5f5;
      border-radius: 4px;
      padding: 10px;
      flex: 1;
      text-align: center;
      border: 1px solid #e0e0e0;
    }
    .kpi-value {
      font-size: 20px;
      font-weight: bold;
      color: #1976d2;
    }
    .kpi-label {
      font-size: 11px;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th {
      background-color: #1976d2;
      color: white;
      padding: 8px;
      text-align: left;
      font-weight: bold;
      font-size: 11px;
    }
    td {
      border-bottom: 1px solid #ddd;
      padding: 8px;
      vertical-align: middle;
    }
    tr:nth-child(even) {
      background-color: #f9f9f9;
    }
    
    .badge {
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 10px;
      font-weight: bold;
      color: white;
      display: inline-block;
      text-transform: capitalize;
    }
    /* Colores similares a MUI */
    .badge-Realizada { background-color: #2e7d32; } /* Success */
    .badge-Programada { background-color: #0288d1; } /* Info */
    .badge-No_realizada { background-color: #d32f2f; } /* Error */
    .badge-Cancelada { background-color: #9e9e9e; } /* Grey */
    .badge-En_curso { background-color: #ed6c02; } /* Warning */
    
    .footer-info {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 10px 20px;
      font-size: 9px;
      color: #999;
      text-align: right;
      border-top: 1px solid #eee;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>Historial de Clases de Consulta</h1>
    <p><strong>Curso:</strong> {{cursoNombre}}</p>
    <p>Generado el: {{fechaGeneracion}}</p>
  </div>

  <div class="kpi-container">
    <div class="kpi-card">
      <div class="kpi-value">{{kpis.total}}</div>
      <div class="kpi-label">Total Clases</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-value">{{kpis.realizadas}}</div>
      <div class="kpi-label">Realizadas</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-value">{{kpis.pctEfectividad}}%</div>
      <div class="kpi-label">Efectividad Revisi√≥n</div>
    </div>
  </div>

  <h3>Detalle de Clases</h3>
  <table>
    <thead>
      <tr>
        <th style="width: 15%">Fecha</th>
        <th style="width: 25%">Nombre</th>
        <th style="width: 20%">Docente</th>
        <th style="width: 15%">Estado</th>
        <th style="width: 10%; text-align: center;">Total Cons.</th>
        <th style="width: 10%; text-align: center;">Revisadas</th>
      </tr>
    </thead>
    <tbody>
      {{#each clases}}
      <tr>
        <td>{{this.fecha}}</td>
        <td>{{this.nombre}}</td>
        <td>{{this.docente}}</td>
        <td>
          <span class="badge badge-{{this.estadoRaw}}">{{this.estado}}</span>
        </td>
        <td style="text-align: center;">{{this.totalConsultas}}</td>
        <td style="text-align: center;">{{this.revisadas}}</td>
      </tr>
      {{/each}}
    </tbody>
  </table>

  <div class="footer-info">
    Plataforma de Algoritmia - Reporte Oficial
  </div>
</body>
</html>